#!/bin/bash -e

apt-get update
apt-get install -y python3 python3-pip pkg-config libffi-dev
apt-get install -y libsecp256k1-0 libsecp256k1-dev

SAWTOOTH_DIR=$(cd $(dirname $(dirname $0)) && pwd)

mkdir $SAWTOOTH_DIR/wheels || true

(cd $SAWTOOTH_DIR/signing &&
 python3 setup.py bdist_wheel -d $SAWTOOTH_DIR/wheels &&
 pip3 wheel --wheel-dir $SAWTOOTH_DIR/wheels bitcoin==1.1.42 secp256k1==0.13.2 )


